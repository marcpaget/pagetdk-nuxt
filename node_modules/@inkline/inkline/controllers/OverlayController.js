"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
module.exports = exports.OverlayController = void 0;
var _helpers = require("@inkline/inkline/helpers");
const OverlayController = {
  instances: {},
  stack: [],
  zIndex: 1050,
  register(instance) {
    if (instance && instance.name) {
      OverlayController.instances[instance.name] = instance;
    }
  },
  unregister(instance) {
    if (instance && instance.name) {
      OverlayController.instances[instance.name] = null;
      delete OverlayController.instances[instance.name];
    }
  },
  open(name) {
    if (typeof window === "undefined") {
      return;
    }
    OverlayController.stack.push(name);
    OverlayController.instances[name].$el.style.zIndex = OverlayController.zIndex++;
  },
  close(name) {
    if (typeof window === "undefined") {
      return;
    }
    OverlayController.stack.splice(OverlayController.stack.indexOf(name), 1);
  },
  getTopOverlay() {
    const topOverlayName = OverlayController.stack.slice(-1)[0] || "";
    return OverlayController.instances[topOverlayName];
  },
  onPressEscape() {
    const topOverlay = OverlayController.getTopOverlay();
    if (topOverlay && topOverlay.closeOnPressEscape) {
      topOverlay.hide();
    }
  }
};
exports.OverlayController = OverlayController;
if (typeof window !== "undefined") {
  window.addEventListener("keydown", e => {
    if ((0, _helpers.isKey)("esc", e)) {
      OverlayController.onPressEscape();
    }
  });
}
var _default = OverlayController;
module.exports = _default;