import{F as ce,_ as ie}from"./fuse.esm.e5f0aacd.js";import{_ as Y}from"./Badge.49aad048.js";import{a as Z,v as de,a4 as pe,m as p,C as k,o as a,h as m,f as c,c as x,w as l,l as h,t as y,u as e,A as b,aK as A,F as q,D as G,K as ee,i as s,y as $,k as me,H as fe,aL as _e,aa as ve,aM as he,aN as ye,aj as ge,ac as xe}from"./entry.902f663c.js";import{_ as be}from"./NSelect.vue.9f52b6f9.js";import{_ as Ce}from"./NTextInput.vue.361fd6cd.js";import{_ as ke}from"./CodeSnippets.vue.473c040b.js";import{_ as te}from"./NPanelGrids.0426d51d.js";import{_ as $e}from"./NCodeBlock.vue.f20ad1f9.js";import{u as Re}from"./editor.ff73b8b7.js";import{C as X}from"./constants.d7bcda3c.js";import{_ as Te}from"./PanelLeftRight.vue.583d184f.js";const je={"h-full":"","w-full":"",flex:"~ col"},qe={flex:"~ col gap-2","flex-none":"",p4:"","navbar-glass":""},Se={flex:"~ gap2"},Ve={flex:"~ gap2","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},we=c("div",{"flex-auto":""},null,-1),Ne={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Ue={"text-right":"","font-mono":""},Ee={key:1,relative:""},Pe={key:2,px4:"",py2:"",flex:"~ col gap-2",border:"b base"},Be={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},Le=c("div",null,"Response",-1),Me={key:1,"text-xs":"",op50:""},Oe=c("div",{"flex-auto":""},null,-1),De=c("div",{op50:""}," Request finished in ",-1),Fe=Z({__name:"ServerRouteDetails",props:{route:{type:Object,required:!0}},setup(P){const B=P,R=de(),u=pe({contentType:"text/plain",data:"",statusCode:200,error:void 0}),T=p(()=>u.contentType.includes("application/json")?"json":u.contentType.includes("text/html")?"html":u.contentType.includes("text/css")?"css":u.contentType.includes("text/javascript")?"javascript":u.contentType.includes("text/xml")||u.contentType.includes("application/xml")?"xml":"text"),j=p(()=>T.value==="json"?JSON.stringify(u.data,null,2):u.data),w=k(0),C=k(!1),N=k(!1),H=Re(),L=p(()=>B.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),S=p(()=>L.value?.filter(n=>n.startsWith(":")||n.startsWith("**:"))||[]),g=k(B.route.method||"GET"),U=k({}),E=k([{key:"",value:""}]),V=k([{key:"",value:""}]),f=k([{key:"Content-Type",value:"application/json"}]),K=p(()=>V.value.filter(({key:n})=>n).length),z=p(()=>f.value.filter(({key:n})=>n).length),W=p(()=>{const n={};for(let t=0;t<E.value.length;t++){const{key:o,value:i}=E.value[t];n[o]=i}return Object.keys(n)[0]?n:null}),ne=p(()=>{let n=R.value?.devServer.url||"http://localhost";n.charAt(n.length-1)==="/"&&(n=n.slice(0,-1));const t=R.value?.devServer.port||3e3;return n.includes(`:${t}`)?n:`${n}:${t}`}),M=p(()=>{let n=new URLSearchParams(Object.fromEntries(V.value.filter(({key:i})=>i).map(({key:i,value:_})=>[i,_]))).toString();n&&(n=`?${n}`);const t=(L.value?.map(i=>(i.startsWith(":")||i.startsWith("**:"))&&U.value[i]||i).join("")||"")+n;let o=R.value?.app.baseURL||"";return(o==="./"||o===".")&&(o=""),o.endsWith("/")&&(o=o.slice(0,-1)),o+t}),oe=p(()=>ne.value+M.value);async function J(){N.value=!0,C.value=!0,Object.assign(u,{lang:"text",contentType:"",data:"",content:"",error:void 0});const n=Date.now();try{u.data=await $fetch(oe.value,{method:g.value.toUpperCase(),headers:Object.fromEntries(f.value.filter(({key:t,value:o})=>t&&o).map(({key:t,value:o})=>[t,o])),query:Object.fromEntries(V.value.filter(({key:t,value:o})=>t&&o).map(({key:t,value:o})=>[t,o])),body:W.value,onResponse({response:t}){u.contentType=(t.headers.get("content-type")||"").toString().toLowerCase().trim(),u.statusCode=t.status},onResponseError(t){u.error=t.response._data,u.data=t.response._data}})}catch{}C.value=!1,w.value=Date.now()-n}const Q=p(()=>{const n=[],t=[],o=f.value.filter(({key:_,value:v})=>_&&v&&!(_==="Content-Type"&&v==="application/json")).map(({key:_,value:v})=>`  '${_}': '${v}'`).join(`,
`);g.value.toUpperCase()!=="GET"&&t.push(`method: '${g.value.toUpperCase()}'`),o&&t.push(`headers: {
${o}
}`),W.value&&t.push(`body: ${JSON.stringify(W.value,null,2)}`);const i=t.length?`, {
${t.join(`,
`).split(`
`).map(_=>`  ${_}`).join(`
`)}
}`:"";return n.push({name:"useFetch",lang:"javascript",docs:X.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${M.value}'${i})`}),n.push({name:"$fetch",lang:"javascript",docs:X.nuxt.$fetch,code:`await $fetch('${M.value}'${i})`}),n}),d=k(S.value.length?"params":"query"),O=p(()=>{if(d.value==="query")return V.value;if(d.value==="body")return E.value;if(d.value==="headers")return f.value}),se=["GET","POST","PUT","PATCH","DELETE","HEAD"];return(n,t)=>{const o=me,i=be,_=Ce,v=fe,ae=ke,re=te,le=_e,I=Y,ue=$e;return a(),m("div",je,[c("div",qe,[c("div",Se,[P.route.method?(a(),x(o,{key:0,class:b(("getRequestMethodClass"in n?n.getRequestMethodClass:e(A))(e(g))),"pointer-events-none":"",tabindex:"-1"},{default:l(()=>[h(y(e(g).toUpperCase()),1)]),_:1},8,["class"])):(a(),x(i,{key:1,modelValue:e(g),"onUpdate:modelValue":t[0]||(t[0]=r=>ee(g)?g.value=r:null),class:b(("getRequestMethodClass"in n?n.getRequestMethodClass:e(A))(e(g)))},{default:l(()=>[(a(),m(q,null,G(se,r=>c("option",{key:r,class:b(("getRequestMethodClass"in n?n.getRequestMethodClass:e(A))(r))},y(r.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),s(_,{"model-value":e(M),disabled:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"primary xs"},null,8,["model-value"]),s(o,{n:"primary solid",onClick:J},{default:l(()=>[s(v,{icon:"carbon:send"})]),_:1})])]),c("div",Ve,[e(S).length?(a(),x(o,{key:0,class:b(e(d)==="params"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[1]||(t[1]=r=>d.value="params")},{default:l(()=>[s(v,{icon:"i-carbon-text-selection"}),h(" Params ("+y(e(S).length)+") ",1)]),_:1},8,["class"])):$("",!0),s(o,{class:b(e(d)==="query"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[2]||(t[2]=r=>d.value="query")},{default:l(()=>[s(v,{icon:"i-carbon-help"}),h(" Query "+y(e(K)?`(${e(K)})`:""),1)]),_:1},8,["class"]),e(g)!=="GET"?(a(),x(o,{key:1,class:b(e(d)==="body"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[3]||(t[3]=r=>d.value="body")},{default:l(()=>[s(v,{icon:"i-carbon-document"}),h(" Body ")]),_:1},8,["class"])):$("",!0),s(o,{class:b(e(d)==="headers"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[4]||(t[4]=r=>d.value="headers")},{default:l(()=>[s(v,{icon:"i-carbon-html-reference"}),h(" Headers "+y(e(z)?`(${e(z)})`:""),1)]),_:1},8,["class"]),s(o,{class:b(e(d)==="snippet"?"text-primary n-primary":"border-transparent! shadow-none!"),onClick:t[5]||(t[5]=r=>d.value="snippet")},{default:l(()=>[s(v,{icon:"carbon:code"}),h(" Snippets ")]),_:1},8,["class"]),we,s(o,{icon:"carbon-launch",onClick:t[6]||(t[6]=r=>e(H)(P.route.filepath))},{default:l(()=>[h(" Open in Editor ")]),_:1})]),e(d)==="params"?(a(),m("div",Ne,[(a(!0),m(q,null,G(e(S),r=>(a(),m(q,{key:r},[c("div",Ue,y(r),1),s(_,{modelValue:e(U)[r],"onUpdate:modelValue":D=>e(U)[r]=D,placeholder:r,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):$("",!0),e(d)==="snippet"?(a(),m("div",Ee,[e(Q).length?(a(),x(ae,{key:0,border:"b base","code-snippets":e(Q)},null,8,["code-snippets"])):$("",!0)])):e(O)?(a(),m("div",Pe,[(a(!0),m(q,null,G(e(O),(r,D)=>(a(),m("div",{key:D,flex:"~ gap-2","justify-around":""},[s(_,{modelValue:r.key,"onUpdate:modelValue":F=>r.key=F,placeholder:"Key","flex-1":"","font-mono":"",n:"sm"},null,8,["modelValue","onUpdate:modelValue"]),s(_,{modelValue:r.value,"onUpdate:modelValue":F=>r.value=F,placeholder:"Value","flex-1":"","font-mono":"",n:"sm"},null,8,["modelValue","onUpdate:modelValue"]),s(o,{n:"red",onClick:F=>e(O).splice(D,1)},{default:l(()=>[s(v,{icon:"carbon:delete"})]),_:2},1032,["onClick"])]))),128)),c("div",null,[s(o,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:t[7]||(t[7]=r=>e(O).push({key:"",value:""}))},{default:l(()=>[h(" Add ")]),_:1})])])):$("",!0),e(N)?e(C)?(a(),x(le,{key:4,"z-10":"","flex-auto":"","backdrop-blur":""},{default:l(()=>[h(" Fetching... ")]),_:1})):(a(),m(q,{key:5},[c("div",Be,[Le,e(u).error?(a(),x(I,{key:0,"bg-red-400:10":"","text-red-400":""},{default:l(()=>[h(" Error ")]),_:1})):$("",!0),s(I,{class:b({"bg-orange-400:10 text-orange-400":e(u).error,"bg-green-400:10 text-green-400":!e(u).error})},{default:l(()=>[h(y(e(u).statusCode),1)]),_:1},8,["class"]),e(u).contentType?(a(),m("code",Me,y(e(u).contentType),1)):$("",!0),Oe,De,s(I,{"bg-green-400:10":"","text-green-400":""},{default:l(()=>[h(y(e(w))+" ms ",1)]),_:1})]),s(ue,{"flex-auto":"","overflow-auto":"","py-2":"",code:e(j),lang:e(T)},null,8,["code","lang"])],64)):(a(),x(re,{key:3},{default:l(()=>[s(o,{n:"primary",onClick:J},{default:l(()=>[s(v,{icon:"carbon:send"}),h(" Send request ")]),_:1})]),_:1}))])}}}),Ae={flex:"~ gap1","text-sm":"",op50:""},Ge={key:0},He={"w-12":"","flex-none":"","text-right":""},We={"font-mono":"","text-sm":""},Ie=c("div",{"x-divider":""},null,-1),Ke=c("span",{op75:""},"Select a route to start",-1),at=Z({__name:"server-routes",setup(P){const B=ve(),R=he(),u=p(()=>new ce(R.value||[],{keys:["method","route"],shouldSort:!0})),T=p(()=>R.value?.find(C=>C.path===B.query?.path)),j=k(""),w=p(()=>R.value?j.value?u.value.search(j.value).map(C=>C.item):R.value:[]);return(C,N)=>{const H=ie,L=Y,S=ge,g=Fe,U=xe,E=te,V=Te;return a(),x(V,null,{left:l(()=>[s(H,{search:e(j),"onUpdate:search":N[0]||(N[0]=f=>ee(j)?j.value=f:null),pb2:""},{default:l(()=>[c("div",Ae,[e(j)?(a(),m("span",Ge,y(e(w).length)+" matched Â· ",1)):$("",!0),c("span",null,y(e(R)?.length)+" routes in total",1)])]),_:1},8,["search"]),(a(!0),m(q,null,G(e(w),f=>(a(),m(q,{key:f.id},[s(S,{flex:"~ gap-2","items-center":"","hover-bg-active":"",px2:"",py1:"",class:b([{"bg-active":e(T)?.path===f.path}]),to:{query:{path:f.path}}},{default:l(()=>[c("div",He,[s(L,{class:b(("getRequestMethodClass"in C?C.getRequestMethodClass:e(A))(f.method||"*")),title:"updates available",textContent:y((f.method||"*").toUpperCase())},null,8,["class","textContent"])]),c("span",We,y(f.route),1)]),_:2},1032,["class","to"]),Ie],64))),128))]),right:l(()=>[(a(),x(ye,{max:10},[e(T)?(a(),x(g,{key:e(T).path,route:e(T)},null,8,["route"])):$("",!0)],1024)),e(T)?$("",!0):(a(),x(E,{key:0},{default:l(()=>[s(U,{px6:"",py2:""},{default:l(()=>[Ke]),_:1})]),_:1}))]),_:1})}}});export{at as default};
