import{a as x,r as u,k as y,l as S,m as $,w as p,p as R,q as k,f as C,s as H,o as v,h as g,t as B,i as D,j as M,v as W,x as b,u as i,y as z,z as A,A as F,B as I,C as L}from"./entry.7502f86b.js";const N={class:"w-full mx-auto max-w-1200px h-full max-h-630px justify-center flex",style:{"max-height":"630px"}},T=x({__name:"IFrameLoader",props:{src:String,aspectRatio:Number,description:String},setup(l){const t=l,s=u(t.src),a=y(),c=u(),n=u(0),o=S(()=>{let e=c.value;e||(e=document.querySelector("#iframe-loader"));const r=Date.now();e.src="";const d=e.offsetHeight,f=e.offsetWidth,h=d>630?1:d/630,_=f>1200?1:f/1200,w=_>h?h:_;n.value=0,e.style.opacity="0",e.onload=()=>{e.style.opacity="1",n.value=Date.now()-r},e.src=`${s.value}&scale=${w}&mode=${a.value}`},200);$(()=>{p(()=>t.src,e=>{s.value=e,o()},{immediate:!0}),p([()=>R.value,a],()=>{o()})}),k({bodyAttrs:{onresize:()=>{o()}}});const m=C(()=>t.description.replace("%s",n.value.toString()));return p(m,e=>{H.value=e}),(e,r)=>(v(),g("div",N,[B("iframe",{id:"iframe-loader",ref_key:"iframe",ref:c,class:"max-h-full",style:D({aspectRatio:l.aspectRatio}),width:"1200",height:"630"},null,4)]))}}),j=M(T,[["__scopeId","data-v-85f41f36"]]),q={class:"flex h-full w-full"},E=x({__name:"index",async setup(l){let t,s;const a=([t,s]=W(()=>z.useServerConfig()),t=await t,s(),t),c=a.value?.height||630,o=(a.value?.width||1200)/c;return(m,e)=>{const r=j;return v(),g("div",q,[b(r,{src:`${i(A)}/api/og-image-html?path=${i(F)}&timestamp=${i(I)}`,"aspect-ratio":o,description:"[HTML] Generated in %sms.",class:"max-h-full",onRefresh:i(L)},null,8,["src","onRefresh"])])}}});export{E as default};
